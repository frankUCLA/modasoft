<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>ERP simple - Administración</title>
    <link rel="stylesheet" href="styles_admin.css">
    <script>
    function switchTab(tab) {
        document.getElementById('inventarioPanel').style.display = 'none';
        document.getElementById('catalogoPanel').style.display = 'none';
        document.getElementById('transaccionesPanel').style.display = 'none';
        document.getElementById('tab-inventario').classList.remove('active');
        document.getElementById('tab-catalogo').classList.remove('active');
        document.getElementById('tab-transacciones').classList.remove('active');
        if (tab === 'inventario') {
            document.getElementById('inventarioPanel').style.display = 'block';
            document.getElementById('tab-inventario').classList.add('active');
        }
        if (tab === 'catalogo') {
            document.getElementById('catalogoPanel').style.display = 'block';
            document.getElementById('tab-catalogo').classList.add('active');
        }
        if (tab === 'transacciones') {
            document.getElementById('transaccionesPanel').style.display = 'block';
            document.getElementById('tab-transacciones').classList.add('active');
        }
    }
    window.onload = function() {
        switchTab('inventario');
    };
    </script>
</head>
<body>
    <div id="app" class="container">
        <header class="header">
            <h1>ERP simple - Panel de Administración</h1>
            <div id="statusDisplay" class="status-msg">Conectado</div>
            
            <div id="userPanel" class="user-panel">
                <!-- Estos valores se llenarán con JS al cargar la página -->
                <span id="userName" class="badge">Usuario</span>
                <span id="rolLabel" class="badge role-badge">ADMIN</span>
                <button id="logoutBtn" class="btn secondary">Cerrar sesión</button>
            </div>
        </header>

        <main id="panelSection" class="card">
            <h2 class="section-title">Panel de Control Principal</h2>
            
            <!-- MENÚ DE NAVEGACIÓN POR PESTAÑAS -->
            <nav class="tab-nav">
                <button id="tab-inventario" class="active" onclick="switchTab('inventario')">Gestión de Inventario</button>
                <button id="tab-catalogo" onclick="switchTab('catalogo')">Catálogos (Tallas, Categorías, Proveedores)</button>
                <button id="tab-transacciones" onclick="switchTab('transacciones')">Transacciones y Reportes (Ventas, Clientes, Caja)</button>
            </nav>
            
            <!-- 1. GESTIÓN DE INVENTARIO Y PRODUCTOS -->
            <div id="inventarioPanel" class="panel tabContent" style="display:block;">
                <h3>Gestión de Productos</h3>
                <div class="row header-row">
                                        <h4>Crear Producto</h4>
                                </div>
                                <form id="form-producto-admin">
                                    <div class="row form-row">
                                        <div class="col">
                                            <input id="prodMarca" placeholder="Marca" class="input" required>
                                        </div>
                                        <div class="col">
                                            <select id="prodCategoria" class="input" required>
                                                <option value="">Selecciona Categoría</option>
                                                <!-- Opciones dinámicas -->
                                            </select>
                                        </div>
                                        <div class="col">
                                            <select id="prodProveedor" class="input" required>
                                                <option value="">Selecciona Proveedor</option>
                                                <!-- Opciones dinámicas -->
                                            </select>
                                        </div>
                                    </div>
                                    <div class="row form-row">
                                        <div class="col">
                                            <input id="prodNombre" placeholder="Nombre del Producto" class="input" required>
                                        </div>
                                        <div class="col">
                                            <input id="prodPrecio" placeholder="Precio ($)" type="number" step="0.01" class="input" required>
                                        </div>
                                        <div class="col">
                                            <input id="prodInventario" placeholder="Inventario total" type="number" min="0" class="input" required>
                                        </div>
                                    </div>
                                    <div class="row form-row">
                                        <fieldset style="border:1px solid #ccc; padding:10px;">
                                            <legend>Tallas y Cantidades</legend>
                                            <label>S:<input type="number" id="talla_s" min="0" value="0" style="width:60px;"></label>
                                            <label>M:<input type="number" id="talla_m" min="0" value="0" style="width:60px;"></label>
                                            <label>L:<input type="number" id="talla_l" min="0" value="0" style="width:60px;"></label>
                                            <label>XL:<input type="number" id="talla_xl" min="0" value="0" style="width:60px;"></label>
                                        </fieldset>
                                    </div>
                                    <div class="row form-row">
                                        <button id="btnCrearProd" class="btn primary" type="submit">Registrar Producto</button>
                                    </div>
                                </form>
                
                <div class="row header-row">
                    <h4>Listado de Productos</h4>
                </div>
                <div class="row form-row">
                    <div class="col">
                        <input id="prodBuscar" placeholder="Buscar por nombre" class="input">
                    </div>
                    <div class="col" style="flex: 0 0 auto;">
                        <button id="btnBuscarProd" class="btn secondary">Buscar</button>
                    </div>
                </div>
                
                <div id="adminProductos" class="list">
                    <div class="item">Cargando lista de productos...</div>
                </div>
            </div>

            <!-- 2. CATÁLOGOS: TALLAS, CATEGORÍAS, PROVEEDORES -->
            <div id="catalogoPanel" class="panel tabContent" style="display:none;">
                <h2 style="color: #3b82f6;">Configuración de Catálogos</h2>
                
                <!-- Gestión de Categorías (Ejemplo de CRUD simple) -->
                <h3>Gestión de Categorías</h3>
                <form id="form-categoria" class="row form-row">
                    <div class="col">
                        <input id="catNombre" name="catNombre" placeholder="Nueva Categoría (Ej: Camisetas)" class="input" required>
                    </div>
                    <div class="col" style="flex: 0 0 auto;">
                        <button id="btnCrearCat" class="btn primary" type="submit">Crear Categoría</button>
                    </div>
                </form>
                <div id="catalogoCategorias" class="list">
                    <div class="item">Cargando categorías...</div>
                </div>
                
                <!-- Placeholder para Tallas -->
                <h3>Gestión de Tallas (S, M, L, XL)</h3>
                <div id="catalogoTallas" class="list">
                    <div class="item">Funcionalidad pendiente...</div>
                </div>
                
                <!-- Placeholder para Proveedores -->
                <h3>Gestión de Proveedores</h3>
                <form id="form-proveedor" class="row form-row">
                    <div class="col">
                        <input id="provNombre" name="provNombre" placeholder="Nombre del Proveedor" class="input" required>
                    </div>
                    <div class="col">
                        <input id="provContacto" name="provContacto" placeholder="Contacto" class="input">
                    </div>
                    <div class="col">
                        <input id="provTelefono" name="provTelefono" placeholder="Teléfono" class="input">
                    </div>
                    <div class="col" style="flex: 0 0 auto;">
                        <button id="btnCrearProv" class="btn primary" type="submit">Crear Proveedor</button>
                    </div>
                </form>
                <div id="catalogoProveedores" class="list">
                    <div class="item">Cargando proveedores...</div>
                </div>
            </div>

            <!-- 3. TRANSACCIONES Y REPORTES -->
            <div id="transaccionesPanel" class="panel tabContent" style="display:none;">
                <h2 style="color: #3b82f6;">Reportes y Movimientos</h2>
                <!-- Reportes Gerenciales -->
                <h3>Indicadores Gerenciales</h3>
                <ul>
                  <li>Rotación de Inventario</li>
                  <li>Análisis de Ventas por Temporada (seleccionable)</li>
                  <li>Control de Margen de Ganancias por Categoría</li>
                  <li>Reporte de Utilidad por Producto</li>
                </ul>
                <!-- Placeholder para Ventas -->
                <h3>Listado de Ventas (Facturas)</h3>
                <div id="reporteVentas" class="list">
                    <div class="item">Cargando ventas recientes...</div>
                </div>
                <!-- Placeholder para Movimientos de Caja -->
                <h3>Movimientos Contables y de Caja</h3>
                <div id="reporteCaja" class="list">
                    <div class="item">Cargando movimientos contables...</div>
                </div>
                <!-- Placeholder para Clientes -->
                <h3>Listado de Clientes</h3>
                <div id="reporteClientes" class="list">
                    <div class="item">Cargando lista de clientes...</div>
                </div>
                <!-- Placeholder para Compras -->
                <h3>Listado de Órdenes de Compra</h3>
                <div id="reporteCompras" class="list">
                    <div class="item">Cargando lista de compras...</div>
                </div>
                <!-- Placeholder para Devoluciones -->
                <h3>Gestión de Devoluciones (Clave requerida)</h3>
                <form id="form-devolucion">
                  <label>Clave de acceso:<input type="password" id="claveDevolucion" required></label>
                  <button type="submit" class="btn secondary">Acceder</button>
                </form>
                <div id="panelDevoluciones" style="display:none;">
                  <label>Buscar venta por fecha y hora:<input type="datetime-local" id="buscaVentaFecha"></label>
                  <button id="btnBuscarVenta" class="btn">Buscar Venta</button>
                  <div id="devolucionResultados"></div>
                </div>
            </div>
            
        </main>
    </div>
    <script src="cliente.js"></script>
</body>
</html>